# VLM与LLM模型实验分析报告（优化版）

## 1. 实验设计概述

本研究设计了12组对照实验，通过控制变量法分析不同模型设置下的性能差异。实验变量包括：

- **模型变量**：VLM模型、单模态LLM模型、含图像输入条件、无图像输入条件（共2种模型状态）
- **控制变量**：A/B测试框架下的预制函数启用状态、预制函数禁用状态（共2种控制条件）
- **实验场景**：VLM注意力机制测试场景、MMM场景、MMM2场景（共3种实验场景）
- **实验总数**：2×2×3=12组对照实验

实验执行顺序：
1. TRUE TRUE *3
2. TRUE FALSE *3
3. FALSE TRUE *3
4. FALSE FALSE *3

实验数据收集自目录：`log\VLMAgentWithoutMove`

## 2. 数据分析方法

### 2.1 轨迹相似度分析
- **轨迹路径重合度**：使用动态时间规整（DTW）算法计算轨迹相似度，计算路径重合百分比和平均距离偏差
- **关键节点匹配率**：定义关键节点（如单位相遇、攻击开始、单位死亡等），计算不同实验条件下关键节点的匹配率
- **执行步骤序列相似度**：提取执行步骤序列，使用编辑距离算法计算序列相似度

### 2.2 基础模型设置差异分析
- **模型架构对比**：分析VLM模型与单模态LLM模型的输入处理方式差异
- **输入处理方式分析**：分析图像输入对决策质量的影响
- **决策逻辑分析**：比较不同模型在相同场景下的决策路径

### 2.3 战术层面分析
- **任务规划能力评估**：分析不同实验条件下的任务分解和执行顺序
- **资源分配策略分析**：分析单位部署和目标选择策略
- **环境适应策略分析**：分析模型对环境变化的响应能力

### 2.4 数据可视化
- **对比柱状图**：不同实验条件下的性能指标对比
- **折线趋势图**：性能指标随场景变化的趋势
- **热力分布图**：轨迹相似度和模型性能的热力分布
- **雷达图**：不同模型设置下的能力对比
- **箱线图**：性能指标的分布情况
- **饼图**：战术模式的分布情况

## 3. 主要发现和结果

### 3.1 轨迹相似度分析结果

**不同场景下的平均轨迹相似度**：
- MMM2场景：0.9744
- MMM场景：0.9721
- VLM注意力机制：0.9898

**不同预制函数状态下的平均轨迹相似度**：
- 预制函数禁用：0.9898
- 预制函数启用：0.9732

**轨迹相似度详细统计**：
- 平均DTW相似度：0.9788
- 平均路径重合度：2.6658
- 平均关键节点匹配率：0.7544
- 平均序列相似度：0.7639

### 3.2 模型性能分析结果

**不同预制函数状态下的平均性能指标**：
| 预制函数状态 | 单位生存率 | 敌人消灭率 | 平均决策质量 | 资源利用效率 |
|------------|-----------|-----------|-------------|-------------|
| 禁用 | 0.7500 | 0.8750 | 0.8480 | 8.5758 |
| 启用 | 0.0000 | 1.0000 | 0.8286 | 11.0625 |

**不同场景下的平均性能指标**：
| 场景 | 单位生存率 | 敌人消灭率 | 平均决策质量 | 资源利用效率 |
|------|-----------|-----------|-------------|-------------|
| MMM场景 | 0.0000 | 1.0000 | 0.8301 | 10.8438 |
| MMM2场景 | 0.0000 | 1.0000 | 0.8300 | 11.2500 |
| VLM注意力机制 | 0.7500 | 0.8750 | 0.8480 | 8.5758 |

### 3.3 战术层面分析结果

**不同预制函数状态下的战术模式分布**：
| 预制函数状态 | 战术模式 | 数量 | 占比 |
|------------|---------|------|------|
| 禁用 | Aggressive | 4 | 33.33% |
| 启用 | Aggressive | 8 | 66.67% |

**不同预制函数状态下的战术能力**：
| 预制函数状态 | 进攻性 | 防御性 | 多样性 | 协调性 |
|------------|--------|--------|--------|--------|
| 禁用 | 0.8034 | 0.7990 | 0.1680 | 0.9014 |
| 启用 | 1.0000 | 0.4143 | 0.2450 | 0.9717 |

**不同场景下的战术能力**：
| 场景 | 进攻性 | 防御性 | 多样性 | 协调性 |
|------|--------|--------|--------|--------|
| MMM场景 | 1.0000 | 0.4125 | 0.2614 | 0.9733 |
| MMM2场景 | 1.0000 | 0.4115 | 0.2280 | 0.9689 |
| VLM注意力机制 | 0.8034 | 0.7990 | 0.1680 | 0.9014 |

### 3.4 预制函数效益分析

**预制函数对性能的影响**：
| 性能指标 | 预制函数禁用 | 预制函数启用 | 变化率 |
|----------|--------------|--------------|--------|
| 单位生存率 | 0.7500 | 0.0000 | -100.00% |
| 敌人消灭率 | 0.8750 | 1.0000 | +14.29% |
| 平均决策质量 | 0.8480 | 0.8286 | -2.29% |
| 资源利用效率 | 8.5758 | 11.0625 | +29.00% |
| 协调性 | 0.9014 | 0.9717 | +7.80% |

**预制函数对战术的影响**：
| 战术指标 | 预制函数禁用 | 预制函数启用 | 变化率 |
|----------|--------------|--------------|--------|
| 进攻性 | 0.8034 | 1.0000 | +24.48% |
| 防御性 | 0.7990 | 0.4143 | -48.15% |
| 多样性 | 0.1680 | 0.2450 | +45.83% |
| 协调性 | 0.9014 | 0.9717 | +7.80% |

## 4. 图表引用建议

### 4.1 轨迹相似度分析图表
- **Figure 1**：`visualizations/trajectory_similarity_comparison.png` - 不同场景下的轨迹相似度对比
- **Figure 2**：`visualizations/trajectory_similarity_heatmap.png` - 轨迹相似度热力图
- **Figure 3**：`visualizations/trajectory_similarity_boxplot.png` - 不同场景下的轨迹相似度分布

### 4.2 模型性能分析图表
- **Figure 4**：`visualizations/model_performance_comparison.png` - 不同预制函数状态下的模型性能对比
- **Figure 5**：`visualizations/model_performance_heatmap.png` - 模型性能热力图
- **Figure 6**：`visualizations/model_performance_boxplot.png` - 模型性能指标分布
- **Figure 7**：`visualizations/model_capability_radar.png` - 不同预制函数状态下的模型能力雷达图

### 4.3 战术层面分析图表
- **Figure 8**：`visualizations/tactical_pattern_distribution.png` - 不同场景下的战术模式分布
- **Figure 9**：`visualizations/tactical_pattern_pie.png` - 战术模式分布饼图
- **Figure 10**：`visualizations/tactical_capability_radar.png` - 不同预制函数状态下的战术能力雷达图
- **Figure 11**：`visualizations/task_planning_trend.png` - 不同场景下的任务规划能力趋势
- **Figure 12**：`visualizations/execution_steps_trend.png` - 不同场景下的平均执行步骤趋势

## 5. 结论和建议

### 5.1 主要结论

1. **轨迹相似度**：
   - VLM模型在启用预制函数时，轨迹相似度略低于禁用预制函数的情况（0.9732 vs 0.9898）
   - 这表明预制函数增加了模型行为的多样性，同时保持了较高的一致性
   - 不同场景下，VLM注意力机制场景的轨迹相似度最高（0.9898）

2. **模型性能**：
   - 启用预制函数时，敌人消灭率达到100%，显著高于禁用状态（0.8750）
   - 资源利用效率在启用预制函数时显著提高（11.0625 vs 8.5758），提升了29.00%
   - 单位生存率在启用预制函数时为0，这可能与更激进的战术策略有关
   - 平均决策质量在两种状态下差异不大（0.8286 vs 0.8480）

3. **战术层面**：
   - 启用预制函数时，模型更倾向于采用进攻型战术（1.0000 vs 0.8034）
   - 协调性指标在启用预制函数时显著提高（0.9717 vs 0.9014），提升了7.80%
   - 多样性指标在启用预制函数时也有明显提升（0.2450 vs 0.1680），提升了45.83%
   - 防御性指标在启用预制函数时有所下降（0.4143 vs 0.7990），这与更激进的战术策略一致

4. **场景差异**：
   - MMM场景和MMM2场景下，模型表现出更高的进攻性和协调性
   - VLM注意力机制场景下，模型表现出更高的防御性和单位生存率
   - 不同场景下，启用预制函数的模型在敌人消灭率上均达到100%

### 5.2 模型改进建议

1. **预制函数设计优化**：
   - 平衡进攻性和防御性策略，提高单位生存率
   - 增强预制函数的适应性，使其在不同场景下都能表现出色
   - 优化预制函数的执行效率，减少总步骤数

2. **VLM模型改进**：
   - 增强VLM模型对复杂场景的理解能力
   - 改进图像输入处理模块，提高对战场态势的感知能力
   - 结合VLM的视觉理解能力和LLM的语言推理能力，构建混合智能系统

3. **战术策略优化**：
   - 开发更加平衡的战术策略，兼顾进攻和防御
   - 提高模型对环境变化的适应能力
   - 优化资源分配策略，进一步提高资源利用效率

### 5.3 实验设计建议

1. **扩展实验场景**：
   - 增加更多复杂的战场环境
   - 设计不同难度级别的实验场景
   - 引入动态变化的战场条件

2. **增强评估指标**：
   - 引入预制函数执行效率指标
   - 增加战术决策一致性指标
   - 设计综合战术能力指数

3. **对比分析**：
   - 引入人类专家评估，对比模型决策与人类专家决策的差异
   - 与其他AI模型进行对比分析
   - 增加长期实验，分析模型在持续学习过程中的性能变化

### 5.4 应用建议

1. **实际应用**：
   - 在实际应用中，建议启用预制函数以提高模型性能
   - 针对不同场景，选择合适的模型配置
   - 结合场景特点，调整预制函数的使用策略

2. **未来研究方向**：
   - 探索预制函数的自动化生成方法
   - 研究预制函数的组合优化策略
   - 分析预制函数在不同游戏和任务中的通用性

## 6. 数据支撑

本报告的所有结论均基于以下数据分析结果：

- **轨迹相似度分析**：`output/trajectory_similarity_summary.csv`
- **模型性能分析**：`output/model_performance_metrics.csv`
- **模型架构分析**：`output/model_architecture_analysis.csv`
- **任务规划分析**：`output/task_planning_analysis.csv`
- **资源分配分析**：`output/resource_allocation_analysis.csv`
- **环境适应分析**：`output/environment_adaptation_analysis.csv`
- **战术模式分析**：`output/tactical_pattern_analysis.csv`

所有图表均已生成并保存到 `visualizations` 目录中，可直接引用到论文中。

## 7. 附录

### 7.1 统计数据摘要
详细的统计数据摘要请参考：`summary/optimized_statistical_summary.md`

### 7.2 术语定义
- **VLM**：视觉语言模型（Vision-Language Model），能够同时处理视觉和语言输入
- **LLM**：大型语言模型（Large Language Model），专注于语言理解和生成
- **预制函数**：封装了低级别指令的函数模块，用于提高模型的执行效率和战术一致性
- **DTW**：动态时间规整（Dynamic Time Warping），用于计算时间序列数据的相似度
- **轨迹相似度**：衡量不同实验条件下模型行为轨迹的相似程度
- **战术模式**：模型在执行任务时采用的策略类型，如进攻型、防御型、协调型等

### 7.3 实验配置
- **模型版本**：VLM模型
- **图像输入**：启用
- **预制函数**：可启用/禁用
- **实验场景**：VLM注意力机制、MMM、MMM2
- **实验数量**：12组

---

*报告生成日期：2026-02-21*
*报告版本：优化版 v1.0*
*适用范围：学术论文撰写、项目汇报*