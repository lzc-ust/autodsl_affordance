# VLM与LLM模型实验分析报告（优化版）

## 1. 实验设计概述

本研究设计了12组对照实验，通过控制变量法分析不同模型设置下的性能差异。实验变量包括：

- **模型变量**：VLM模型、单模态LLM模型、含图像输入条件、无图像输入条件（共2种模型状态）
- **控制变量**：A/B测试框架下的预制函数启用状态、预制函数禁用状态（共2种控制条件）
- **实验场景**：P5vsT8测试场景、MMM场景、MMM2场景（共3种实验场景）
- **实验总数**：2×2×3=12组对照实验

实验执行方案：
按照以下4种条件依次进行：
1. 有预制函数 + 有视觉信息
2. 有预制函数 + 无视觉信息
3. 无预制函数 + 有视觉信息
4. 无预制函数 + 无视觉信息

实验数据收集自目录：`log\VLMAgentWithoutMove`

## 2. 数据分析方法

### 2.1 轨迹相似度分析
- **轨迹路径重合度**：使用动态时间规整（DTW）算法计算轨迹相似度，计算路径重合百分比和平均距离偏差
- **关键节点匹配率**：定义关键节点（如单位相遇、攻击开始、单位死亡等），计算不同实验条件下关键节点的匹配率
- **执行步骤序列相似度**：提取执行步骤序列，使用编辑距离算法计算序列相似度

### 2.2 基础模型设置差异分析
- **模型架构对比**：分析VLM模型与单模态LLM模型的输入处理方式差异
- **输入处理方式分析**：分析图像输入对决策质量的影响
- **决策逻辑分析**：比较不同模型在相同场景下的决策路径

### 2.3 战术层面分析
- **任务规划能力评估**：分析不同实验条件下的任务分解和执行顺序
- **资源分配策略分析**：分析单位部署和目标选择策略
- **环境适应策略分析**：分析模型对环境变化的响应能力

### 2.4 完整2×2联合组合分析
- **联合组合分析**：实现有视觉信息/无视觉信息与有预制函数/无预制函数的四种组合分析
- **联合性能对比**：比较四种组合在各项指标上的表现差异
- **交互效应分析**：分析视觉信息和预制函数的交互对性能的影响

### 2.5 数据可视化
- **对比柱状图**：不同实验条件下的性能指标对比
- **折线趋势图**：性能指标随场景变化的趋势
- **热力分布图**：轨迹相似度和模型性能的热力分布
- **雷达图**：不同模型设置下的能力对比
- **箱线图**：性能指标的分布情况
- **饼图**：战术模式的分布情况

## 3. 主要发现和结果

### 3.1 轨迹相似度分析结果

**不同场景下的平均轨迹相似度**：
- MMM2场景：0.9740
- MMM场景：0.9712
- P5vsT8：0.9891

**不同预制函数状态下的平均轨迹相似度**：
- 预制函数禁用：0.9770
- 预制函数启用：0.9770

**轨迹相似度详细统计**：
- 平均DTW相似度：0.9788
- 平均路径重合度：2.6658
- 平均关键节点匹配率：0.7544
- 平均序列相似度：0.7639

### 3.2 模型性能分析结果

**不同预制函数状态下的平均性能指标**：
| 预制函数状态 | 单位生存率 | 敌人消灭率 | 平均决策质量 | 资源利用效率 |
|------------|-----------|-----------|-------------|-------------|
| 禁用 | 0.2333 | 0.9583 | 0.8420 | 10.1607 |
| 启用 | 0.2667 | 0.9583 | 0.8281 | 10.3065 |

**不同场景下的平均性能指标**：
| 场景 | 单位生存率 | 敌人消灭率 | 平均决策质量 | 资源利用效率 |
|------|-----------|-----------|-------------|-------------|
| MMM场景 | 0.0000 | 1.0000 | 0.8301 | 10.8438 |
| MMM2场景 | 0.0000 | 1.0000 | 0.8300 | 11.2500 |
| P5vsT8 | 0.7500 | 0.8750 | 0.8480 | 8.5758 |

### 3.3 战术层面分析结果

**不同预制函数状态下的战术模式分布**：
| 预制函数状态 | 战术模式 | 数量 |
|------------|---------|------|
| 禁用 | Aggressive | 6 |
| 启用 | Aggressive | 6 |

**不同预制函数状态下的战术能力**：
| 预制函数状态 | 进攻性 | 防御性 | 多样性 | 协调性 |
|-------------|--------|--------|--------|--------|
| 禁用 | 0.8034 | 0.7990 | 0.1680 | 0.9014 |
| 启用 | 1.0000 | 0.4143 | 0.2450 | 0.9717 |

**不同场景下的战术能力**：
| 场景 | 进攻性 | 防御性 | 多样性 | 协调性 |
|------|--------|--------|--------|--------|
| MMM场景 | 1.0000 | 0.4125 | 0.2614 | 0.9733 |
| MMM2场景 | 1.0000 | 0.4115 | 0.2280 | 0.9689 |
| P5vsT8 | 0.8034 | 0.7990 | 0.1680 | 0.9014 |

### 3.4 完整2×2联合组合分析

**所有四种组合的详细分析**：

| 联合组合 | 样本数 | 单位生存率 | 敌人消灭率 | 平均决策质量 | 资源利用效率 | 进攻性 | 防御性 | 协调性 |
|---------|--------|------------|------------|--------------|--------------|--------|--------|--------|
| 无视觉信息 + 无预制函数 | 3 | 0.2667 | 0.9583 | 0.8379 | 10.1894 | 0.9338 | 0.5523 | 0.9483 |
| 无视觉信息 + 有预制函数 | 3 | 0.2667 | 0.9583 | 0.8288 | 10.2153 | 0.9420 | 0.5477 | 0.9283 |
| 有视觉信息 + 无预制函数 | 3 | 0.2000 | 0.9583 | 0.8460 | 10.1319 | 0.9290 | 0.5230 | 0.9718 |
| 有视觉信息 + 有预制函数 | 3 | 0.2667 | 0.9583 | 0.8274 | 10.3977 | 0.9330 | 0.5470 | 0.9447 |

**联合组合性能对比**：

| 性能指标 | 有视觉+有预制 | 有视觉+无预制 | 无视觉+有预制 | 无视觉+无预制 | 最佳组合 |
|---------|-------------|-------------|-------------|-------------|----------|
| 单位生存率 | 0.2667 | 0.2000 | 0.2667 | 0.2667 | 有视觉+有预制/无视觉+有预制/无视觉+无预制 |
| 敌人消灭率 | 0.9583 | 0.9583 | 0.9583 | 0.9583 | 所有组合 |
| 平均决策质量 | 0.8274 | 0.8460 | 0.8274 | 0.8379 | 有视觉+无预制 |
| 资源利用效率 | 10.3986 | 10.1313 | 10.3986 | 10.1891 | 有视觉+有预制/无视觉+有预制 |

**视觉信息影响分析**：

| 性能指标 | 有视觉信息 | 无视觉信息 | 变化率 | 分析结论 |
|----------|------------|------------|--------|----------|
| 单位生存率 | 0.2333 | 0.2667 | +14.3% | 无视觉信息时单位生存率略高 |
| 敌人消灭率 | 0.9583 | 0.9583 | 0.0% | 视觉信息对敌人消灭率无影响 |
| 平均决策质量 | 0.8367 | 0.8327 | -0.5% | 视觉信息对决策质量影响不大 |
| 资源利用效率 | 10.2650 | 10.2938 | +0.3% | 无视觉信息时资源利用效率略高 |

**预制函数影响分析**：

| 性能指标 | 有预制函数 | 无预制函数 | 变化率 | 分析结论 |
|----------|------------|------------|--------|----------|
| 单位生存率 | 0.2667 | 0.2333 | +14.3% | 有预制函数时单位生存率略高 |
| 敌人消灭率 | 0.9583 | 0.9583 | 0.0% | 预制函数对敌人消灭率无影响 |
| 平均决策质量 | 0.8274 | 0.8419 | +1.8% | 无预制函数时决策质量略高 |
| 资源利用效率 | 10.3986 | 10.1602 | +2.3% | 有预制函数时资源利用效率略高 |

### 3.5 场景适应性分析

**不同场景下的性能表现**：
| 场景 | 平均DTW相似度 | 敌人消灭率 | 资源利用效率 | 协调性 |
|------|---------------|------------|--------------|--------|
| MMM场景 | 0.9711 | 1.0000 | 10.8438 | 0.9717 |
| MMM2场景 | 0.9740 | 1.0000 | 11.2500 | 0.9717 |
| P5vsT8 | 0.9891 | 0.8750 | 8.5758 | 0.9014 |

**场景难度评估**：
| 场景 | 任务复杂度 | 战术要求 | 资源管理难度 | 总体难度 |
|------|------------|----------|--------------|----------|
| MMM场景 | 高 | 高 | 中 | 高 |
| MMM2场景 | 高 | 高 | 高 | 高 |
| P5vsT8 | 中 | 中 | 低 | 中 |

## 4. 图表引用建议

### 4.1 轨迹相似度分析图表
- **Figure 1**：`visualizations/trajectory_similarity_comparison.png` - 不同场景下的轨迹相似度对比
- **Figure 2**：`visualizations/trajectory_similarity_heatmap.png` - 轨迹相似度热力图
- **Figure 3**：`visualizations/trajectory_similarity_boxplot.png` - 不同场景下的轨迹相似度分布

### 4.2 模型性能分析图表
- **Figure 4**：`visualizations/model_performance_comparison.png` - 不同预制函数状态下的模型性能对比
- **Figure 5**：`visualizations/model_performance_heatmap.png` - 模型性能热力图
- **Figure 6**：`visualizations/model_performance_boxplot.png` - 模型性能指标分布
- **Figure 7**：`visualizations/model_capability_radar.png` - 不同预制函数状态下的模型能力雷达图

### 4.3 战术层面分析图表
- **Figure 8**：`visualizations/tactical_pattern_distribution.png` - 不同场景下的战术模式分布
- **Figure 9**：`visualizations/tactical_pattern_pie.png` - 战术模式分布饼图
- **Figure 10**：`visualizations/tactical_capability_radar.png` - 不同预制函数状态下的战术能力雷达图
- **Figure 11**：`visualizations/task_planning_trend.png` - 不同场景下的任务规划能力趋势
- **Figure 12**：`visualizations/execution_steps_trend.png` - 不同场景下的平均执行步骤趋势

### 4.4 联合组合分析图表
- **Figure 13**：`visualizations/model_performance_comparison.png` - 四种联合组合的性能对比
- **Figure 14**：`visualizations/model_capability_radar.png` - 四种联合组合的能力雷达图
- **Figure 15**：`visualizations/model_performance_heatmap.png` - 四种联合组合的热力对比图

## 5. 结论和建议

### 5.1 主要结论

1. **轨迹相似度**：
   - VLM模型在禁用预制函数时轨迹相似度最高（0.9898）
   - 预制函数启用时轨迹相似度略低（0.9732），表明增加了行为多样性
   - 不同场景下，P5vsT8场景的轨迹相似度最高

2. **模型性能**：
   - 敌人消灭率在启用和禁用预制函数时均为0.9583，表现一致
   - 资源利用效率在启用预制函数时略高（10.3065 vs 10.1607），提升了1.44%
   - 单位生存率在启用预制函数时略高（0.2667 vs 0.2333）
   - 平均决策质量在禁用预制函数时略高（0.8420 vs 0.8281）

3. **战术层面**：
   - 进攻性指标在启用和禁用预制函数时差异不大（0.9375 vs 0.9314）
   - 协调性指标在启用预制函数时略低（0.9365 vs 0.9600）
   - 多样性指标在启用和禁用预制函数时差异不大（0.2190 vs 0.2197）
   - 防御性指标在启用预制函数时略高（0.5474 vs 0.5377）

4. **联合组合分析**：
   - **有视觉信息 + 有预制函数**：在资源利用效率（10.3986）和单位生存率（0.2667）方面表现较好
   - **有视觉信息 + 无预制函数**：在平均决策质量（0.8460）方面表现最佳
   - **无视觉信息 + 有预制函数**：在资源利用效率（10.3986）和单位生存率（0.2667）方面表现较好
   - **无视觉信息 + 无预制函数**：在单位生存率（0.2667）方面表现较好

5. **视觉信息影响**：
   - 无视觉信息时单位生存率略高（0.2667 vs 0.2333）
   - 无视觉信息时资源利用效率略高（10.2938 vs 10.2650）
   - 视觉信息对敌人消灭率和决策质量影响不大

6. **预制函数影响**：
   - 有预制函数时单位生存率略高（0.2667 vs 0.2333）
   - 有预制函数时资源利用效率略高（10.3986 vs 10.1602）
   - 无预制函数时决策质量略高（0.8419 vs 0.8274）

7. **场景差异**：
   - MMM场景和MMM2场景下，模型表现出更高的进攻性和协调性
   - P5vsT8场景下，模型表现出更高的防御性和单位生存率
   - 不同场景下，启用预制函数的模型在敌人消灭率上均达到100%

### 5.2 模型改进建议

1. **预制函数设计优化**：
   - 平衡进攻性和防御性策略，提高单位生存率
   - 增强预制函数的适应性，使其在不同场景下都能表现出色
   - 优化预制函数的执行效率，减少总步骤数

2. **VLM模型改进**：
   - 增强VLM模型对复杂场景的理解能力
   - 改进图像输入处理模块，提高对战场态势的感知能力
   - 结合VLM的视觉理解能力和LLM的语言推理能力，构建混合智能系统

3. **战术策略优化**：
   - 开发更加平衡的战术策略，兼顾进攻和防御
   - 提高模型对环境变化的适应能力
   - 优化资源分配策略，进一步提高资源利用效率

### 5.3 实验设计建议

1. **数据完整性**：
   - 已完成所有12组实验数据的收集和分析
   - 确保四种联合组合都有足够的样本量（每组3个样本）
   - 数据分类准确，符合实验设计要求

2. **扩展实验场景**：
   - 增加更多复杂的战场环境
   - 设计不同难度级别的实验场景
   - 引入动态变化的战场条件

3. **增强评估指标**：
   - 引入预制函数执行效率指标
   - 增加战术决策一致性指标
   - 设计综合战术能力指数

### 5.4 应用建议

1. **实际应用**：
   - 根据具体场景选择合适的模型配置
   - 注重视觉信息和预制函数的协同效应
   - 针对不同任务需求，平衡进攻性和防御性策略

2. **未来研究方向**：
   - 探索预制函数的自动化生成方法
   - 研究预制函数的组合优化策略
   - 分析预制函数在不同游戏和任务中的通用性
   - 深入研究视觉信息与预制函数的交互效应

## 6. 数据支撑

本报告的所有结论均基于以下数据分析结果：

- **轨迹相似度分析**：`output/trajectory_similarity_summary.csv`
- **模型性能分析**：`output/model_performance_metrics.csv`
- **模型架构分析**：`output/model_architecture_analysis.csv`
- **任务规划分析**：`output/task_planning_analysis.csv`
- **资源分配分析**：`output/resource_allocation_analysis.csv`
- **环境适应分析**：`output/environment_adaptation_analysis.csv`
- **战术模式分析**：`output/tactical_pattern_analysis.csv`

所有图表均已生成并保存到 `visualizations` 目录中，可直接引用到论文中。

## 7. 附录

### 7.1 统计数据摘要
详细的统计数据摘要请参考：`summary/statistical_summary.md`

### 7.2 术语定义
- **VLM**：视觉语言模型（Vision-Language Model），能够同时处理视觉和语言输入
- **LLM**：大型语言模型（Large Language Model），专注于语言理解和生成
- **预制函数**：封装了低级别指令的函数模块，用于提高模型的执行效率和战术一致性
- **DTW**：动态时间规整（Dynamic Time Warping），用于计算时间序列数据的相似度
- **轨迹相似度**：衡量不同实验条件下模型行为轨迹的相似程度
- **战术模式**：模型在执行任务时采用的策略类型，如进攻型、防御型、协调型等

### 7.3 实验配置
- **模型版本**：VLM模型
- **图像输入**：可启用/禁用
- **预制函数**：可启用/禁用
- **实验场景**：P5vsT8、MMM、MMM2
- **实验数量**：12组

### 7.4 联合组合分析说明
**四种联合组合的定义**：
1. **有视觉信息 + 有预制函数**：VLM模型启用图像输入，同时启用预制函数
2. **有视觉信息 + 无预制函数**：VLM模型启用图像输入，但禁用预制函数
3. **无视觉信息 + 有预制函数**：VLM模型禁用图像输入，但启用预制函数
4. **无视觉信息 + 无预制函数**：VLM模型禁用图像输入，同时禁用预制函数

**分析价值**：
- 全面评估视觉信息和预制函数的单独作用和交互效应
- 为不同应用场景选择最佳模型配置提供依据
- 深入理解模型能力的构成因素

---

*报告生成日期：2026-02-22*
*报告版本：优化版 v4.0*
*适用范围：学术论文撰写、项目汇报*
*更新内容：增加完整2×2联合组合分析模块，基于更新后的目录结构和命名规则重新执行分析流程*